# api_yatube

[Ссылка на описание](#описание)

## Установка

1. создать виртуальное окружение
    ```bash 
    python -m venv venv
    ```
    ```bash 
    source venv/bin/activate
    ```
2. Установить зависимости
    ``` bash
    pip install -r requirements.txt
    ```
3. Установить миграции
    ```bash
    python manage.py makemigrations
    ```
    ```bash
    python manage.py migrate
    ```
4.  Запустить
    ```bash
    python manage.py runserver
    ```

## Описание

### Задача проекта
В проекте api_yatube есть приложение posts с описанием моделей Yatube. Вам нужно реализовать API для всех моделей приложения.

Обычно всю логику API выносят в отдельное приложение: при иной организации кода работать в большом проекте со множеством приложений будет неудобно.

Добавьте в проект новое приложение с именем "api" и реализуйте всю логику именно там.

API должен быть доступен только аутентифицированным пользователям. Используйте в проекте аутентификацию по токену **TokenAuthentication**.

Аутентифицированный пользователь авторизован на изменение и удаление своего контента; в остальных случаях доступ предоставляется только для чтения. При попытке изменить чужие данные должен возвращаться код ответа 403 Forbidden.

Для взаимодействия с ресурсами опишите и настройте такие эндпоинты:
- **api/v1/api-token-auth/** (POST): передаём логин и пароль, получаем токен.
- **api/v1/posts/** (GET, POST): получаем список всех постов или создаём новый пост.
- **api/v1/posts/{post_id}/** (GET, PUT, PATCH, DELETE): получаем, редактируем или удаляем пост с идентификатором {post_id}.
- **api/v1/groups/** (GET): получаем список всех групп.
- **api/v1/groups/{group_id}/** (GET): получаем информацию о группе с идентификатором {group_id}.
- **api/v1/posts/{post_id}/comments/**<br>
    (GET): получаем список всех комментариев поста с идентификатором post_id<br>
    (POST): создаём новый комментарий для поста с идентификатором {post_id}.
- **api/v1/posts/{post_id}/comments/{comment_id}/** (GET, PUT, PATCH, DELETE): получаем, редактируем или удаляем комментарий с идентификатором {comment_id} в посте с id=post_id.

В ответ на запросы POST, PUT и PATCH ваш API должен возвращать объект, который был добавлен или изменён.

Обязательное условие: работайте с моделью Post через ModelViewSet. 

Если вы решите, что вьюсеты подойдут и для работы с остальными моделями — не стесняйтесь, применяйте их везде, где можно.

### Примеры запросов

Пример POST-запроса с токеном Антона Чехова: добавление нового поста.

POST .../api/v1/posts/
```python
{
    "text": "Вечером собрались в редакции «Русской мысли», чтобы поговорить о народном театре. Проект Шехтеля всем нравится.",
    "group": 1
}
```
Пример ответа:
```python
{
    "id": 14,
    "text": "Вечером собрались в редакции «Русской мысли», чтобы поговорить о народном театре. Проект Шехтеля всем нравится.",
    "author": "anton",
    "image": null,
    "group": 1,
    "pub_date": "2021-06-01T08:47:11.084589Z"
}
```
Пример POST-запроса с токеном Антона Чехова: отправляем новый комментарий к посту с id=14.

POST .../api/v1/posts/14/comments/
```python
{
    "text": "тест тест"
}
```
Пример ответа:
```python
{
    "id": 4,
    "author": "anton",
    "post": 14,
    "text": "тест тест",
    "created": "2021-06-01T10:14:51.388932Z"
}
```

Пример GET-запроса с токеном Антона Чехова: получаем информацию о группе.

GET .../api/v1/groups/2/

Пример ответа:
```python
{
    "id": 2,
    "title": "Математика",
    "slug": "math",
    "description": "Посты на тему математики"
}
```
